<div class="background-img">
  <img src="../../../assets/img/BackgroundHome.png" alt="pito" />
</div>

<div class="header-menu">
  <div class="burguer-icon" (click)="openSidebar()"></div>
  <h1 class="nav-text">Configuración</h1>
</div>

<div>
  <div class="config-box" *ngIf="loggedInUser">
    <div class="config-user-avatar">
      <div>
        <h1>Hola {{ loggedInUser.username }}</h1>
        <h3>
          Nombre:
          <h4>{{ loggedInUser.username }}</h4>
        </h3>
        <h3>
          Email:
          <h4>{{ loggedInUser.email }}</h4>
        </h3>
      </div>
      <div class="update-img">
        <div class="input-img">
          <h3>Cambiar Avatar:</h3>
          <ng-container class="register-button">
            <input
              (change)="onFileSelected($event)"
              type="file"
              placeholder="Cambiar Avatar"
              accept="image/jpeg, image/png"
            />
          </ng-container>
        </div>
        <img
          *ngIf="this.loggedInUser.profileImg?.fotoBase64"
          class="user-img"
          [src]="this.loggedInUser.profileImg?.fotoBase64"
          alt="Imagen"
        />
        <div
          class="user-no-img"
          *ngIf="!this.loggedInUser.profileImg?.fotoBase64"
        ></div>
      </div>
    </div>
    <div class="config-user">
      <p-accordion [multiple]="false" [activeIndex]="[0]">
        <p-accordionTab header="Cambiar correo electrónico">
          <div class="email-input">
            <p-floatLabel>
              <input
                pInputText
                id="email"
                placeholder="Introduzca el nuevo correo"
                [(ngModel)]="email"
              />
              <label for="email">Introduzca el nuevo correo</label>
            </p-floatLabel>

            <p-floatLabel>
              <input
                pInputText
                id="email"
                placeholder="Introduzca de nuevo el correo"
                [(ngModel)]="emailCheck"
              />
              <label for="email">Introduzca de nuevo el correo</label>
            </p-floatLabel>
            <button class="update-button" (click)="updateEmail()">
              Cambiar correo
            </button>
          </div>
        </p-accordionTab>
        <p-accordionTab header="Cambiar nombre de usuario">
          <div class="user-input">
            <p-floatLabel>
              <input
                pInputText
                id="username"
                placeholder="Introduzca su nuevo nombre"
                [(ngModel)]="username"
              />
              <label for="username">Introduzca su nuevo nombre</label>
            </p-floatLabel>

            <p-floatLabel>
              <input
                pInputText
                id="username"
                placeholder="Introduzca de nuevo el nombre"
                [(ngModel)]="usernameCheck"
              />
              <label for="username">Introduzca de nuevo el nombre</label>
            </p-floatLabel>
            <button class="update-button" (click)="updateUsername()">
              Cambiar nombre
            </button>
          </div>
        </p-accordionTab>
        <p-accordionTab header="Cambiar contraseña">
          <div class="password-input">
            <p-floatLabel>
              <p-password
                [(ngModel)]="password"
                [feedback]="false"
                [toggleMask]="true"
              />
              <label for="password">Introduzca su nueva contraseña</label>
            </p-floatLabel>
            <p-floatLabel>
              <p-password
                [(ngModel)]="passwordCheck"
                [feedback]="false"
                [toggleMask]="true"
              />
              <label for="password">Introduzca de nuevo la contraseña</label>
            </p-floatLabel>
            <button class="update-button" (click)="updatePassword()">
              Cambiar contraseña
            </button>
          </div>
        </p-accordionTab>
      </p-accordion>
    </div>
  </div>
</div>
<!-- SIDEBAR-->
<div
  class="background-opacity"
  *ngIf="navBarActive"
  (click)="closeSidebar()"
></div>
<div class="sidebar" id="mySidebar" *ngIf="navBarActive">
  <div class="sidebar-header">
    <h2 class="side-text">Inicio</h2>
    <div class="close-icon" (click)="closeSidebar()"></div>
  </div>
  <div class="separator"></div>

  <div class="sidebar-item" (click)="navToHome()">
    <h1 class="side-text">Home</h1>
    <div class="home-icon"></div>
  </div>

  <div class="sidebar-item" (click)="navToBooks()" *ngIf="loggedInUser">
    <h2 class="side-text">Reservas</h2>
    <div class="box-icon"></div>
  </div>

  <div class="user-logged-item" *ngIf="loggedInUser">
    <div class="separator"></div>
    <div class="user-info">
      <img
        class="user-img"
        *ngIf="loggedInUser.profileImg"
        [src]="loggedInUser.profileImg.fotoBase64"
        alt="Imagen"
      />
      <div class="user-details">
        <h3 class="text">{{ loggedInUser.username }}</h3>
        <p class="text">{{ loggedInUser.email }}</p>
      </div>
    </div>
    <div class="separator"></div>

    <div class="sidebar-item" (click)="userLogOut()" *ngIf="loggedInUser">
      <h2 class="side-text">Log Out</h2>
      <div class="login-icon"></div>
    </div>

    <div class="footer">
      <p>Derechos reservados a mi etc explicitamente</p>
    </div>
  </div>
</div>
